(this["webpackJsonp4chan-image-scroller-client"]=this["webpackJsonp4chan-image-scroller-client"]||[]).push([[0],{11:function(e,t,c){"use strict";c.r(t);var a=c(1),o=c.n(a),s=c(3),r=c.n(s),n=c(4),l=(c(9),c(0));var i=()=>{const[e,t]=Object(a.useState)("pol"),[c,o]=Object(a.useState)([]),[s,r]=Object(a.useState)(!0),[i,h]=Object(a.useState)(0),[d,j]=Object(a.useState)([]);Object(a.useEffect)((()=>{(async()=>{try{const t=await fetch("http://localhost:3001/thread-numbers?board=".concat(e)),c=await t.json();j(c),h(0),o([]),r(!0)}catch(t){console.error("Failed to fetch thread numbers:",t)}})()}),[e]),Object(a.useEffect)((()=>{(async()=>{if(d.length>0)try{let t=[];const c=d.slice(0,5);for(const a of c){const c=await fetch("http://localhost:3001/images?board=".concat(e,"&thread=").concat(a)),o=await c.json();t=[...t,...o]}o(t),h(1)}catch(t){console.error("Failed to fetch initial images:",t)}})()}),[d,e]);return Object(l.jsxs)("div",{className:"image-scroller",children:[Object(l.jsx)("h1",{children:"Image Scroller"}),Object(l.jsx)("label",{htmlFor:"board-selector",children:"Select Board: "}),Object(l.jsxs)("select",{id:"board-selector",value:e,onChange:e=>t(e.target.value),children:[Object(l.jsx)("option",{value:"pol",children:"/pol/ - Politically Incorrect"}),Object(l.jsx)("option",{value:"b",children:"/b/ - Random"}),Object(l.jsx)("option",{value:"g",children:"/g/ - Technology"}),Object(l.jsx)("option",{value:"v",children:"/v/ - Video Games"})]}),Object(l.jsx)(n.a,{dataLength:c.length,next:async()=>{if(5*i>=d.length)r(!1);else try{let t=[];const a=d.slice(5*i,5*(i+1));for(const c of a){const a=await fetch("http://localhost:3001/images?board=".concat(e,"&thread=").concat(c)),o=await a.json();t=[...t,...o]}o([...c,...t]),h(i+1)}catch(t){console.error("Failed to fetch more images:",t)}},hasMore:s,loader:Object(l.jsx)("h4",{children:"Loading..."}),endMessage:Object(l.jsx)("p",{children:"No more images"}),children:Object(l.jsx)("div",{className:"images",children:c.map(((e,t)=>Object(l.jsxs)("div",{className:"image-container",children:[Object(l.jsx)("img",{src:"http://localhost:3001/image?url=".concat(encodeURIComponent(e)),alt:"Image ".concat(t)},t),Object(l.jsx)("button",{onClick:()=>(async e=>{if(navigator.share)try{await navigator.share({title:"Check out this image",url:e})}catch(t){console.error("Error sharing:",t)}else console.log("Web Share API is not supported in your browser.")})(e),children:"Share"})]},t)))})})]})};r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(i,{})}),document.getElementById("root"))},9:function(e,t,c){}},[[11,1,2]]]);
//# sourceMappingURL=main.e9fbccdf.chunk.js.map